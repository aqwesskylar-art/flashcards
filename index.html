<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Flashcards Fullscreen</title>
<style>
  body {
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    background: #f5f5f5;
    font-family: sans-serif;
  }

  /* Fullscreen card container */
  #cardContainer {
    flex: 1;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    background: white;
    margin: 0;
    overflow: hidden;
  }

  #card {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 28px;
    padding: 20px;
    cursor: pointer;
    transition: transform 0.25s;
    flex-direction: column;
    position: relative;
  }

  #card img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  /* Card counter with arrows */
  #counterContainer {
    position: absolute;
    top: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
  }
  #counterContainer button {
    font-size: 20px;
    padding: 4px 8px;
    margin: 0 10px;
    border-radius: 6px;
    border: 1px solid #007bff;
    background: white;
    color: #007bff;
  }
  #cardCount {
    font-size: 20px;
    font-weight: bold;
  }

  /* Bottom menu */
  #menu {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: #fff;
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    box-shadow: 0 -4px 12px rgba(0,0,0,0.2);
  }

  button.menuBtn {
    padding: 14px 10px;
    border: none;
    border-radius: 10px;
    background: #007bff;
    color: white;
    font-size: 16px;
    flex: 1;
    margin: 0 5px;
  }
  
   button {
    padding: 14px 10px;
    border: none;
    border-radius: 10px;
    background: #007bff;
    color: white;
    font-size: 16px;
    flex: 1;
    margin: 0 5px;
  }

  #deleteButton {
    background: #e74c3c;
  }

  /* Add card form overlay */
  #addCardForm {
    display: none;
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 20px;
    border-radius: 16px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 10;
    flex-direction: column;
  }

  input, textarea {
    margin: 8px 0;
    padding: 10px;
    width: 100%;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  /* Card list overlay */
  #cardListOverlay {
    display: none;
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:white;
    overflow-y:auto;
    z-index:20;
    padding:20px;
  }

  #cardListOverlay h3 {
    margin-top: 0;
  }

  #cardListOverlay ul {
    list-style:none;
    padding:0;
    margin:0;
  }

  #cardListOverlay li {
    padding: 12px 10px;
    border-bottom: 1px solid #ccc;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- Card container -->
<div id="cardContainer">
  <div id="card">
    <p id="text"></p>
    <img id="image" src="" style="display:none;">

    <!-- Counter with arrows -->
    <div id="counterContainer">
      <button onclick="prevCard()">&#8592;</button>
      <span id="cardCount">Card 0 of 0</span>
      <button onclick="nextCard()">&#8594;</button>
    </div>
  </div>
</div>

<!-- Bottom menu -->
<div id="menu">
  <button class="menuBtn" onclick="toggleAddForm()">Add Card</button>
  <button class="menuBtn" id="deleteButton" onclick="deleteCard()">Delete</button>
  <button class="menuBtn" onclick="exportCards()">Export Cards</button>
  <button class="menuBtn" onclick="document.getElementById('importFile').click()">Import Cards</button>
  <button class="menuBtn" onclick="toggleCardList()">Select</button>
  <input type="file" id="importFile" style="display:none;" accept=".json" onchange="importCards(event)">
</div>

<!-- Add card form -->
<div id="addCardForm">
  <h3>Add New Card</h3>
  <label>Front (Text):</label>
  <textarea id="frontTextInput" rows="3"></textarea>
  <label>Back (Image):</label>
  <input type="file" accept="image/*" id="backImageInput">
  <button type="button" onclick="addCard()">Save Card</button>
</div>

<!-- Card list overlay -->
<div id="cardListOverlay">
  <h3>Select a Card</h3>
  <ul id="cardList"></ul>
  <button onclick="toggleCardList()">Close</button>
</div>

<script>
// --- Preloaded cards ---
let cards = [
  { front: "What is the capital of France?", back: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA..." },
  { front: "Who painted the Mona Lisa?", back: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA..." }
];

let index = 0;
let flipped = false;

// --- Render card ---
function render() {
  const textEl = document.getElementById("text");
  const imgEl = document.getElementById("image");
  const countEl = document.getElementById("cardCount");

  countEl.innerText = `Card ${cards.length === 0 ? 0 : index + 1} of ${cards.length}`;

  if(cards.length === 0){
    textEl.innerText = "No cards yet. Add one!";
    textEl.style.display = "block";
    imgEl.style.display = "none";
    return;
  }

  const card = cards[index];
  if(!flipped){
    textEl.innerText = card.front;
    textEl.style.display = "block";
    imgEl.style.display = "none";
  } else {
    imgEl.src = card.back;
    imgEl.style.display = "block";
    textEl.style.display = "none";
  }
}

// --- Add card ---
function addCard() {
  const frontText = document.getElementById("frontTextInput").value.trim();
  const backFile = document.getElementById("backImageInput").files[0];
  if(!frontText || !backFile){
    alert("Please enter text and select an image");
    return;
  }

  const reader = new FileReader();
  reader.onload = function() {
    cards.push({ front: frontText, back: reader.result });
    index = cards.length - 1;
    flipped = false;
    render();
    document.getElementById("frontTextInput").value = "";
    document.getElementById("backImageInput").value = "";
    toggleAddForm();
  }
  reader.readAsDataURL(backFile);
}

// --- Delete card ---
function deleteCard() {
  if(cards.length === 0) return;
  if(!confirm("Delete this card?")) return;
  cards.splice(index,1);
  if(index >= cards.length) index = cards.length-1;
  flipped = false;
  render();
}

// --- Toggle add card form ---
function toggleAddForm() {
  const el = document.getElementById("addCardForm");
  el.style.display = el.style.display === "flex" || el.style.display === "block" ? "none" : "flex";
}

// --- Tap to flip ---
document.getElementById("card").addEventListener("click", () => {
  if(cards.length === 0) return;
  flipped = !flipped;
  render();
});

// --- Swipe navigation ---
let startX = 0;
document.getElementById("card").addEventListener("touchstart", e => { startX = e.touches[0].clientX; });
document.getElementById("card").addEventListener("touchend", e => {
  const endX = e.changedTouches[0].clientX;
  const diff = endX - startX;
  if(Math.abs(diff) > 50){
    if(diff < 0) index = (index +1) % cards.length;
    else index = (index -1 + cards.length) % cards.length;
    flipped = false;
    render();
  }
});

// --- Arrow buttons navigation ---
function prevCard() {
  if(cards.length === 0) return;
  flipped = true;        // <-- reset to front
  index = (index - 1 + cards.length) % cards.length;
  render();
}

function nextCard() {
  if(cards.length === 0) return;
  flipped = true;        // <-- reset to front
  index = (index + 1) % cards.length;
  render();
}

// --- Export cards to JSON ---
function exportCards() {
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(cards));
  const dlAnchor = document.createElement('a');
  dlAnchor.setAttribute("href", dataStr);
  dlAnchor.setAttribute("download", "flashcards.json");
  dlAnchor.click();
}

// --- Import cards from JSON ---
function importCards(event){
  const file = event.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = function(e){
    try{
      const imported = JSON.parse(e.target.result);
      if(Array.isArray(imported)){
        cards = imported;
        index = 0;
        flipped = false;
        render();
        alert("Flashcard set loaded!");
      } else {
        alert("Invalid JSON file");
      }
    } catch(err){
      alert("Error reading JSON file");
    }
  }
  reader.readAsText(file);
}

// --- Card selection list ---
function toggleCardList() {
  const overlay = document.getElementById("cardListOverlay");
  if(overlay.style.display === "none" || overlay.style.display === ""){
    renderCardList();
    overlay.style.display = "block";
  } else {
    overlay.style.display = "none";
  }
}

function renderCardList() {
  const ul = document.getElementById("cardList");
  ul.innerHTML = "";
  cards.forEach((c, i) => {
    const li = document.createElement("li");
    li.innerText = c.front;
    li.onclick = () => {
      index = i;
      flipped = false;
      render();
      toggleCardList();
    };
    ul.appendChild(li);
  });
}

// --- Initial render ---
render();
</script>

</body>
</html>




